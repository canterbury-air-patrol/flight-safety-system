#include "server-db.h"

void db_connect(const char *host, const char *user, const char *pass, const char *db)
{
    char *target = NULL;
    asprintf(&target, "%s@%s", host, db);
    EXEC SQL BEGIN DECLARE SECTION;
    const char *db_target = target;
    const char *db_user = user;
    const char *db_pass = pass;
    EXEC SQL END DECLARE SECTION;

    EXEC SQL CONNECT TO :db_target AS conn USER :db_user USING :db_pass;
}


void db_disconnect()
{
    EXEC SQL DISCONNECT ALL;
}
